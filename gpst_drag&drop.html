<!--
 드래그 앤 드롭 템플릿 작업시간 S : 11:38
 드래그 앤 드롭 템플릿 작업시간 중지 시간 : 
 드래그 앤 드롭 템플릿 작업시간 E : 
-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C. 문항예시 - 드래그 앤 드롭</title>

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">

    <script src="./js/jquery.min_1.12.4.js"></script>
    <script src="./js/jquery-ui.js"></script>
</head>
<body>
    <div id="wrap">
        <!-- 템플릿 S-->
        <div id="template_wrap">
            <div class="container">
                <div class="template_wrap">
                    <div class="tmp_head clearfix">
                        <h1 class="page_title">C. 문항예시 - 드래그 앤 드롭</h1>
                        <div class="time_box">
                            <span class="minute">11</span>
                            <span class="dot">:</span>
                            <span class="second">16</span>
                        </div>
                    </div>
                    <div class="tmp_content clearfix">
                        <div class="tmp_item context">
                            <div class="tmp_inner">
                                <div class="context_txt">
                                    <p>선생님이랑 학생이랑 대화를 합니다.</p>
                                </div>
                                <div class="context_wrap">
                                    <div class="context_img">
                                        <img src="./images/drag_img.jpg" alt="학교 이미지">
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="tmp_item question">
                            <div class="tmp_inner">
                                <div class="question_top_box">
                                    <strong class="question_title">학교에서 보물찾기 했지요. 어떤 보물부터 찾았을까요?</strong>
                                </div>
                                <div class="drag_wrap">
                                    <div class="drag_box">
                                        <ul class="drag_q">
                                            <li class="drag_img" draggable="true">
                                                <img src="./images/drag1.jpg" alt="지도">
                                            </li>
                                            <li class="drag_img" draggable="true">
                                                <img src="./images/drag2.jpg" alt="노트">
                                            </li>
                                            <li class="drag_img" draggable="true">
                                                <img src="./images/drag3.jpg" alt="자">
                                            </li>
                                            <li class="drag_img" draggable="true">
                                                <img src="./images/drag4.jpg" alt="펜">
                                            </li>
                                        </ul>
                                        <ul class="drag_a">
                                            <li class="drag_img">

                                            </li>
                                            <li class="drag_img">
                                                
                                            </li>
                                            <li class="drag_img">
                                                
                                            </li>
                                            <li class="drag_img">
                                                
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tmp_footer clearfix">
                        <a href="javascript:;" class="btn_change prev">
                            <span class="ir_so">이전 페이지</span>
                        </a>
                        <ul class="tmp_paging">
                            <!-- 
                                li class 추가 
                                제출한 문제 : end
                                현재 문제 : current

                            -->
                            <li class="btn_page end">
                                <a href="javascript:;">1</a>
                            </li>
                            <li class="btn_page end">
                                <a href="javascript:;">2</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">3</a>
                            </li>
                            <li class="btn_page end">
                                <a href="javascript:;">4</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">5</a>
                            </li>
                            <li class="btn_page current">
                                <a href="javascript:;">6</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">7</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">8</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">9</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">10</a>
                            </li>
                            <li class="btn_page">
                                <a href="javascript:;">11</a>
                            </li>
                        </ul>
                        <a href="javascript:;" class="btn_change next">
                            <span class="ir_so">다음 페이지</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 템플릿 E-->
    </div>
<script>
    $(function(){

        let da_img = $(".drag_a .drag_img");
        let dq_img = $(".drag_q .drag_img");
        let imgIndex;
        let dropIndex

        // 이미지에 드래그 가능하도록 추가
       $(".drag_box ul.drag_q .drag_img").draggable({
           revert: "invalid"
         , containment : "parents"
         , helper: "clone"
         , cursor: "move"
        });

       $(".drag_a .drag_img").droppable({
           accept: ".drag_q > li",
           classes: {
                "ui-droppable-active": "ui-state-highlight"
            },
            drop : function(event, ui){
                deleteImage( ui.draggable );
            }

            // drop: function(event, ui) {
            //     // // 이미지 인덱스
            //     // console.log(imgIndex);
            //     // // 박스에 이미지가 있는지?
            //     // let imgCheck = $(".drag_a .drag_img").eq(imgIndex).find("img").length;
            //     // console.log("===== imgCheck =====");
            //     // console.log(imgCheck);
            //     // if(imgCheck > 0){
            //     //     console.log("이미 이미지 존재합니다.");
            //     // }else{
            //     //     // 이미지가 존재하지 않을시
            //     //     let imgSrc = $(".drag_q .drag_img.ui-draggable-dragging img").attr("src");
            //     //     let img = "<img src='"+imgSrc+"'>";
            //     //     console.log(img);
            //     //     da_img.eq(imgIndex).append(img);
                    

            //     // }
                



            // },
            ,
            over: function(event, ui) {
               // 마우스 들어올때
               dropIndex = $(".drag_a .drag_img .drag.ui-droppable-hover").index();
                //imgIndex = da_img.parent().find(".ui-droppable-hover").index();

            },
            // out: function(event, ui) {
            //     // 마우스 나갈때
            //     console.log("들어왔습니다?333");
            // }
        });

    });

    function deleteImage( $item ) {
        let imgHtml = $item[0].innerHTML;
       
        $(".drag_a .drag_img").eq(dropIndex).append(imgHtml);
        $(".drag_a .drag_img").eq(dropIndex).addClass("hide");
        

      $item.fadeOut(function() {
        


        // var $list = $( "ul", $trash ).length ?
          // $( "ul", $trash ) :
          // $( "<ul class='gallery ui-helper-reset'/>" ).appendTo( $trash );
        //$(".drag_a .drag_img").appendTo($item);
        // $item.find( "a.ui-icon-trash" ).remove();
        // $item.append( recycle_icon ).appendTo( $list ).fadeIn(function() {
        //   $item
        //     .animate({ width: "48px" })
        //     .find( "img" )
        //       .animate({ height: "36px" });
        // });
      });
    }
</script>
</body>
</html>
